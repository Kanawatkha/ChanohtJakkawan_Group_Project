<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Lock responsive behavior per project standard -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login — ChanohtJakkawan</title>

    <!-- Bootstrap Icons (real social icons) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />

    <!-- Page-specific styles (theme colors will match index via login.css) -->
    <link rel="stylesheet" href="../assets/css/login.css" />

    <!-- Favicon & PWA meta (ให้เหมือนหน้าอื่น ๆ) -->
    <link rel="shortcut icon" href="../assets/img/logo.png" type="image/png" />
    <link rel="apple-touch-icon" href="../assets/img/logo.png" />
    <meta name="theme-color" content="#0b0b12" />
  </head>
  <body data-page="login" class="login-page" data-inline-login="true">
    <div class="container">
      <div class="forms-container">
        <div class="signin-signup">
          <!-- ===================== Sign In ===================== -->
          <form action="#" class="sign-in-form login-form" id="login-form" data-auth="signin" novalidate>
            <h2 class="title">Sign in</h2>

            <div class="input-field">
              <i class="bi bi-envelope" aria-hidden="true"></i>
              <input
                type="email"
                name="email"
                placeholder="Email"
                required
                aria-label="Email"
                autocomplete="email"
              />
            </div>

            <div class="input-field">
              <i class="bi bi-lock" aria-hidden="true"></i>
              <input
                type="password"
                name="password"
                placeholder="Password"
                required
                aria-label="Password"
                autocomplete="current-password"
              />
            </div>

            <button type="submit" class="btn solid is-disabled" aria-label="Sign in button" disabled aria-disabled="true">Sign in</button>

            <p class="social-text">Or Sign in with social platforms</p>
            <div class="social-media" aria-label="Social sign-in options">
              <a href="#" class="social-icon" aria-label="Facebook"><i class="bi bi-facebook" aria-hidden="true"></i></a>
              <a href="#" class="social-icon" aria-label="Twitter/X"><i class="bi bi-twitter-x" aria-hidden="true"></i></a>
              <a href="#" class="social-icon" aria-label="Google"><i class="bi bi-google" aria-hidden="true"></i></a>
              <a href="#" class="social-icon" aria-label="GitHub"><i class="bi bi-github" aria-hidden="true"></i></a>
            </div>
          </form>

          <!-- ===================== Sign Up ===================== -->
          <form action="#" class="sign-up-form" id="signup-form" data-auth="signup" novalidate>
            <h2 class="title">Sign up</h2>

            <div class="input-field">
              <i class="bi bi-person" aria-hidden="true"></i>
              <input
                type="text"
                name="signup_username"
                placeholder="Username"
                required
                aria-label="New username"
                autocomplete="username"
              />
            </div>

            <div class="input-field">
              <i class="bi bi-envelope" aria-hidden="true"></i>
              <input
                type="email"
                name="signup_email"
                placeholder="Email"
                required
                aria-label="Email"
                autocomplete="email"
              />
            </div>

            <div class="input-field">
              <i class="bi bi-lock" aria-hidden="true"></i>
              <input
                type="password"
                name="signup_password"
                placeholder="Password"
                required
                aria-label="New password"
                autocomplete="new-password"
              />
            </div>

            <button type="submit" class="btn is-disabled" aria-label="Sign up button" disabled aria-disabled="true">Sign up</button>

            <p class="social-text">Or Sign up with social platforms</p>
            <div class="social-media" aria-label="Social sign-up options">
              <a href="#" class="social-icon" aria-label="Facebook"><i class="bi bi-facebook" aria-hidden="true"></i></a>
              <a href="#" class="social-icon" aria-label="Twitter/X"><i class="bi bi-twitter-x" aria-hidden="true"></i></a>
              <a href="#" class="social-icon" aria-label="Google"><i class="bi bi-google" aria-hidden="true"></i></a>
              <a href="#" class="social-icon" aria-label="GitHub"><i class="bi bi-github" aria-hidden="true"></i></a>
            </div>
          </form>
        </div>
      </div>

      <!-- ===================== Panels (Left / Right) ===================== -->
      <div class="panels-container">
        <div class="panel left-panel">
          <div class="content">
            <h3>New here ?</h3>
            <p>Create your account to start exploring the cosmos with us.</p>
            <button class="btn transparent" id="sign-up-btn" type="button" aria-controls="signup-form">Sign up</button>
          </div>
          <img src="../assets/img/Solar.png" class="image" alt="Cosmic illustration" loading="lazy" />
        </div>

        <div class="panel right-panel">
          <div class="content">
            <h3>One of us ?</h3>
            <p>Welcome back! Sign in to continue your journey.</p>
            <!-- ลิงก์นี้จะถูก e.preventDefault() ทุกขนาด เพื่อเล่นแอนิเมชันกลับไป Sign in -->
            <a href="../index.html" class="btn transparent" id="sign-in-link" aria-controls="login-form">Sign in</a>
          </div>
          <img src="../assets/img/Solar.png" class="image" alt="Cosmic illustration" loading="lazy" />
        </div>
      </div>
    </div>

    <!-- Project JS (global); main.js จะถูก Guard ด้วย data-inline-login ให้ไม่ยุ่งหน้านี้ -->
    <script src="../assets/js/main.js"></script>

    <!-- Inline login logic (Option A): control toggle/validation/redirect -->
    <script>
    (() => {
      const inline = document.body.hasAttribute('data-inline-login');
      if (!inline) return;

      const container = document.querySelector('.container');
      const signUpBtn  = document.getElementById('sign-up-btn');

      // Toggle panels: ปุ่ม Sign up (แผงซ้าย)
      signUpBtn?.addEventListener('click', () => container?.classList.add('sign-up-mode'));

      // Visual cue for filled inputs
      const enhanceFilled = () => {
        document.querySelectorAll('.input-field input').forEach((inp) => {
          const wrap = inp.closest('.input-field');
          if (wrap) wrap.classList.toggle('has-value', (inp.value || '').trim() !== '');
        });
      };
      document.addEventListener('input', (e) => {
        if (e.target && e.target.closest && e.target.closest('.input-field')) enhanceFilled();
      });
      enhanceFilled();

      // Helpers
      const getSubmitBtn = (form) => form?.querySelector('button[type="submit"], input[type="submit"], .btn[type="submit"]');
      const requiredFilled = (form) => Array.from(form.querySelectorAll('[required]')).every((el) => (el.value || '').trim() !== '');
      const syncBtn = (form) => {
        const btn = getSubmitBtn(form);
        const ok = requiredFilled(form);
        if (btn) {
          btn.disabled = !ok;
          btn.classList.toggle('is-disabled', !ok);
          btn.setAttribute('aria-disabled', String(!ok));
        }
      };

      // Forms
      const loginForm  = document.querySelector('form.sign-in-form');
      const signupForm = document.querySelector('form.sign-up-form');

      loginForm?.addEventListener('input', () => syncBtn(loginForm), true);
      signupForm?.addEventListener('input', () => syncBtn(signupForm), true);
      syncBtn(loginForm); syncBtn(signupForm);

      // ปุ่ม Sign in ในแผงขวา: ป้องกันการออกหน้า "ทุกขนาดหน้าจอ" แล้วเล่นแอนิเมชันกลับไป Sign in
      const signInLink = document.getElementById('sign-in-link');
      signInLink?.addEventListener('click', (e) => {
        e.preventDefault();
        container?.classList.remove('sign-up-mode');
        loginForm?.querySelector('input')?.focus();
      });

      // ปลายทางหลัง Sign in (ในฟอร์ม)
      const SIGNIN_REDIRECT = '../index.html';

      // Sign in (ภายในฟอร์ม) -> redirect
      loginForm?.addEventListener('submit', (e) => {
        e.preventDefault();
        if (!requiredFilled(loginForm)) return;
        window.location.href = SIGNIN_REDIRECT;
      });

      // Sign up -> reset + flip back to sign in
      signupForm?.addEventListener('submit', (e) => {
        e.preventDefault();
        if (!requiredFilled(signupForm)) return;
        signupForm.reset();
        enhanceFilled();
        syncBtn(signupForm);
        container?.classList.remove('sign-up-mode');
        loginForm?.querySelector('input')?.focus();
      });
    })();
    </script>
  </body>
</html>